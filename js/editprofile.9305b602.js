(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editprofile"],{"11e9":function(e,t,a){var s=a("52a7"),r=a("4630"),i=a("6821"),n=a("6a99"),o=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=i(e),t=n(t,!0),l)try{return c(e,t)}catch(a){}if(o(e,t))return r(!s.f.call(e,t),e[t])}},"19d3":function(e,t,a){},"1c44":function(e,t,a){"use strict";var s=a("3a73"),r=a.n(s);r.a},"3a73":function(e,t,a){},"5dbc":function(e,t,a){var s=a("d3f4"),r=a("8b97").set;e.exports=function(e,t,a){var i,n=t.constructor;return n!==a&&"function"==typeof n&&(i=n.prototype)!==a.prototype&&s(i)&&r&&r(e,i),e}},7969:function(e,t,a){"use strict";var s=a("19d3"),r=a.n(s);r.a},"8b97":function(e,t,a){var s=a("d3f4"),r=a("cb7c"),i=function(e,t){if(r(e),!s(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,s){try{s=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),s(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,a){return i(e,a),t?e.__proto__=a:s(e,a),e}}({},!1):void 0),check:i}},9093:function(e,t,a){var s=a("ce10"),r=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return s(e,r)}},aa77:function(e,t,a){var s=a("5ca1"),r=a("be13"),i=a("79e5"),n=a("fdef"),o="["+n+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(e,t,a){var r={},o=i(function(){return!!n[e]()||l[e]()!=l}),c=r[e]=o?t(p):n[e];a&&(r[a]=c),s(s.P+s.F*o,"String",r)},p=d.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},c5f6:function(e,t,a){"use strict";var s=a("7726"),r=a("69a8"),i=a("2d95"),n=a("5dbc"),o=a("6a99"),l=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,v="Number",m=s[v],h=m,f=m.prototype,g=i(a("2aeb")(f))==v,_="trim"in String.prototype,I=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=_?t.trim():p(t,3);var a,s,r,i=t.charCodeAt(0);if(43===i||45===i){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+t}for(var n,l=t.slice(2),c=0,u=l.length;c<u;c++)if(n=l.charCodeAt(c),n<48||n>r)return NaN;return parseInt(l,s)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof m&&(g?l(function(){f.valueOf.call(a)}):i(a)!=v)?n(new h(I(t)),a,m):I(t)};for(var N,b=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;b.length>C;C++)r(h,N=b[C])&&!r(m,N)&&d(m,N,u(h,N));m.prototype=f,f.constructor=m,a("2aba")(s,v,m)}},ed24:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{staticClass:"preview",attrs:{src:e.localSrc}}),a("div",{staticClass:"file"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{type:"file",accept:"image/*"},on:{change:e.onChange}}),e._m(0)])])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-label"},[e._v("\n          画像ファイルを選択\n        ")])])}],i=(a("1cda"),{props:["src"],data:function(){return{localSrc:this.src}},methods:{onChange:function(e){var t=this,a=e.target.files[0];if(a){var s=new FileReader;s.readAsDataURL(a),s.addEventListener("load",function(){t.localSrc=s.result;var e=/^data:image\/.+;base64,([a-zA-Z0-9+\/=]+)$/.exec(s.result)[1];t.$emit("onChange",{file:a,base64Body:e})})}}},watch:{src:function(e){this.localSrc||(this.localSrc=e)}}}),n=i,o=(a("1c44"),a("2877")),l=Object(o["a"])(n,s,r,!1,null,"5d81caec",null);t["a"]=l.exports},fb5e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("section",{staticClass:"section"},[a("h1",{staticClass:"title"},[e._v("プロフィール編集")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.updateProfile(t)}}},[a("label",{staticClass:"label"},[e._v("アイコン")]),a("ImageSelector",{attrs:{src:e.iconURL},on:{onChange:e.onImageChange}}),e.iconSizeIsTooLarge?a("p",{staticClass:"help is-danger"},[e._v("アイコンサイズを1MB未満にしてください")]):e._e(),a("label",{staticClass:"label"},[e._v("本名")]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.realName,expression:"realName"}],staticClass:"input",class:{"is-danger":e.realNameIsInvalid},attrs:{type:"text",placeholder:"山村 大介"},domProps:{value:e.realName},on:{input:function(t){t.target.composing||(e.realName=t.target.value)}}})]),a("p",{staticClass:"help"},[e._v("※この項目は公開範囲設定に関わらず外部に公開されません")]),e.realNameIsInvalid?a("p",{staticClass:"help is-danger"},[e._v("127文字以下にしてください")]):e._e()]),a("label",{staticClass:"label"},[e._v("表示名")]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.displayName,expression:"displayName"}],staticClass:"input",class:{"is-danger":e.displayNameIsInvalid},attrs:{type:"text",placeholder:"むーちょ"},domProps:{value:e.displayName},on:{input:function(t){t.target.composing||(e.displayName=t.target.value)}}})]),e.displayNameIsInvalid?a("p",{staticClass:"help is-danger"},[e._v("50文字以下にしてください")]):e._e()]),a("label",{staticClass:"label"},[e._v("学年")]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.grade,expression:"grade"}],attrs:{disabled:e.left},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.grade=t.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:"0"}},[e._v("Please Select")]),a("option",{attrs:{value:"1"}},[e._v("1")]),a("option",{attrs:{value:"2"}},[e._v("2")]),a("option",{attrs:{value:"3"}},[e._v("3")]),a("option",{attrs:{value:"4"}},[e._v("4")]),a("option",{attrs:{value:"5"}},[e._v("5")])])])])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.left,expression:"left"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.left)?e._i(e.left,null)>-1:e.left},on:{change:function(t){var a=e.left,s=t.target,r=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.left=a.concat([i])):n>-1&&(e.left=a.slice(0,n).concat(a.slice(n+1)))}else e.left=r}}}),e._v("\n            卒部済み\n          ")])])]),a("label",{staticClass:"label"},[e._v("学科")]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.department,expression:"department"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.department=t.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:"0"}},[e._v("Please Select")]),a("option",{attrs:{value:"1"}},[e._v("制御情報工学科")]),a("option",{attrs:{value:"2"}},[e._v("機械工学科")]),a("option",{attrs:{value:"3"}},[e._v("電気電子工学科")]),a("option",{attrs:{value:"4"}},[e._v("生物応用科学科")]),a("option",{attrs:{value:"5"}},[e._v("材料システム工学科")])])])])]),a("label",{staticClass:"label"},[e._v("Description")]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"textarea",class:{"is-danger":e.descriptionIsInvalid},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),e.descriptionIsInvalid?a("p",{staticClass:"help is-danger"},[e._v("1023文字以下にしてください")]):e._e()]),a("label",{staticClass:"label"},[e._v("Twitter Screen Name")]),a("div",{staticClass:"field has-addons flex-wrap"},[e._m(0),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.twitterScreenName,expression:"twitterScreenName"}],staticClass:"input right-radios-4",class:{"is-danger":e.twitterScreenNameIsInvalid},attrs:{type:"text"},domProps:{value:e.twitterScreenName},on:{input:function(t){t.target.composing||(e.twitterScreenName=t.target.value)}}})]),e.twitterScreenNameIsInvalid?a("p",{staticClass:"help is-danger w-100"},[e._v("127文字以下にしてください")]):e._e()]),a("label",{staticClass:"label"},[e._v("GitHub User Name")]),a("div",{staticClass:"field has-addons flex-wrap"},[e._m(1),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.githubUserName,expression:"githubUserName"}],staticClass:"input right-radios-4",class:{"is-danger":e.githubUserNameIsInvalid},attrs:{type:"text"},domProps:{value:e.githubUserName},on:{input:function(t){t.target.composing||(e.githubUserName=t.target.value)}}})]),e.githubUserNameIsInvalid?a("p",{staticClass:"help is-danger w-100"},[e._v("127文字以下にしてください")]):e._e()]),a("label",{staticClass:"label"},[e._v("AtCoder User Name")]),a("div",{staticClass:"field has-addons flex-wrap"},[e._m(2),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.atcoderUserName,expression:"atcoderUserName"}],staticClass:"input right-radios-4",class:{"is-danger":e.atcoderUserNameIsInvalid},attrs:{type:"text"},domProps:{value:e.atcoderUserName},on:{input:function(t){t.target.composing||(e.atcoderUserName=t.target.value)}}})]),e.atcoderUserNameIsInvalid?a("p",{staticClass:"help is-danger w-100"},[e._v("127文字以下にしてください")]):e._e()]),a("label",{staticClass:"label"},[e._v("公開範囲")]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.profileScope,expression:"profileScope"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.profileScope=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[e._v("部員にのみ公開")]),a("option",{attrs:{value:"1"}},[e._v("外部にも公開")])])])])]),e._m(3),a("ErrorMessage",{attrs:{error:e.patchProfileError}}),a("ErrorMessage",{attrs:{error:e.postIconError}}),e.hasValidationError?a("p",{staticClass:"has-text-danger"},[e._v("入力値に誤りがあります")]):e._e(),e.isSuccess?a("p",[e._v("保存しました")]):e._e()],1),a("router-link",{attrs:{to:{name:"home"},exact:""}},[e._v("トップページに戻る")])],1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[e._v("\n            https://twitter.com/\n          ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[e._v("\n            https://github.com/\n          ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[e._v("\n            https://atcoder.jp/users/\n          ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[e._v("送信")])])}],i=(a("c5f6"),a("96cf"),a("3b8d")),n=a("cebc"),o=(a("1cda"),a("2f62")),l=a("8e27"),c=a("ed24"),u={name:"editProfile",metaInfo:{title:"プロフィール編集"},components:{ErrorMessage:l["a"],ImageSelector:c["a"]},data:function(){return{newIcon:"",iconSize:0,userName:"",profileScope:"",left:!1,displayName:"",realName:"",description:"",grade:"",department:"",twitterScreenName:"",githubUserName:"",atcoderUserName:"",isSuccess:!1,hasValidationError:!1,realNameIsInvalid:!1,displayNameIsInvalid:!1,descriptionIsInvalid:!1,twitterScreenNameIsInvalid:!1,githubUserNameIsInvalid:!1,atcoderUserNameIsInvalid:!1,iconSizeIsTooLarge:!1}},computed:Object(n["a"])({},Object(o["e"])("user",["userData"]),Object(o["e"])("session",["sessionID"]),Object(o["c"])("editUser",["hasError"]),Object(o["e"])("editUser",["patchProfileError","postIconError"]),{iconURL:function(){return this.userData.icon_url||a("f0e4")}}),mounted:function(){this.profileScope="PUBLIC"===this.userData.profile_scope?1:0,this.left=this.userData.left,this.displayName=this.userData.display_name,this.realName=this.userData.full_name,this.description=this.userData.description,this.grade=this.userData.grade,null!=this.userData.department?this.department=String(this.userData.department.department_id):this.department="0",this.twitterScreenName=this.userData.twitter_screen_name,this.githubUserName=this.userData.github_user_name,this.atcoderUserName=this.userData.atcoder_user_name},methods:Object(n["a"])({},Object(o["b"])("editUser",{patchProfileAction:"patchProfile",postIconAction:"postIcon"}),{postIcon:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.newIcon){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.postIconAction({image:this.newIcon,sessionID:this.sessionID});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),patchProfile:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.patchProfileAction({userProfile:t,sessionID:this.sessionID});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),validation:function(){this.hasValidationError=!1,this.realNameIsInvalid=!1,this.displayNameIsInvalid=!1,this.descriptionIsInvalid=!1,this.twitterScreenNameIsInvalid=!1,this.githubUserNameIsInvalid=!1,this.atcoderUserNameIsInvalid=!1,this.iconSizeIsTooLarge=!1,this.realName.length>=128&&(this.realNameIsInvalid=!0,this.hasValidationError=!0),this.displayName.length>=51&&(this.displayNameIsInvalid=!0,this.hasValidationError=!0),this.description.length>=1024&&(this.descriptionIsInvalid=!0,this.hasValidationError=!0),this.twitterScreenName.length>=128&&(this.twitterScreenNameIsInvalid=!0,this.hasValidationError=!0),this.githubUserName.length>=128&&(this.githubUserNameIsInvalid=!0,this.hasValidationError=!0),this.atcoderUserName.length>=128&&(this.atcoderUserNameIsInvalid=!0,this.hasValidationError=!0),this.iconSize>=Math.pow(1024,2)&&(this.iconSizeIsTooLarge=!0,this.hasValidationError=!0)},onImageChange:function(e){var t=e.file,a=e.base64Body;this.iconSize=t.size,this.newIcon=a},updateProfile:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isSuccess=!1,this.validation(),!this.hasValidationError){e.next=4;break}return e.abrupt("return");case 4:return t={full_name:this.realName,description:this.description,grade:Number(this.grade),left:this.left,role_id:Number(this.userData.role),twitter_screen_name:this.twitterScreenName,github_user_name:this.githubUserName,atcoder_user_name:this.atcoderUserName,department_id:Number(this.department),profile_scope:Number(this.profileScope),display_name:this.displayName},e.next=7,this.patchProfile(t);case 7:return e.next=9,this.postIcon();case 9:this.hasError||(this.isSuccess=!0);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()})},d=u,p=(a("7969"),a("2877")),v=Object(p["a"])(d,s,r,!1,null,"3d3df9b4",null);t["default"]=v.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=editprofile.9305b602.js.map